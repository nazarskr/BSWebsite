/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Pipe } from '@angular/core';
import { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';
import { cloneArray } from '../../../core/utils';
/**
 * @hidden
 */
export class IgxExcelStyleSearchFilterPipe {
    /**
     * @param {?} esf
     */
    constructor(esf) {
        this.esf = esf;
    }
    /**
     * @param {?} items
     * @param {?} searchText
     * @return {?}
     */
    transform(items, searchText) {
        if (!items || !items.length) {
            return [];
        }
        if (!searchText) {
            this.esf.excelStyleSearch.filteredData = null;
            return items;
        }
        searchText = searchText.toLowerCase();
        /** @type {?} */
        const result = items.filter((it, i) => (i === 0 && it.isSpecial) ||
            (it.value !== null && it.value !== undefined) &&
                it.value.toString().toLowerCase().indexOf(searchText) > -1);
        // If 'result' contains the 'Select All' item and at least one more, we use it as a 'finalResult',
        // otherwise we use an empty array as a 'finalResult' of the filtering.
        /** @type {?} */
        const finalResult = result.length > 1 ? result : [];
        // Update the filteredData of the search component.
        this.esf.excelStyleSearch.filteredData = cloneArray(finalResult);
        this.esf.cdr.detectChanges();
        return finalResult;
    }
}
IgxExcelStyleSearchFilterPipe.decorators = [
    { type: Pipe, args: [{
                name: 'excelStyleSearchFilter'
            },] }
];
/** @nocollapse */
IgxExcelStyleSearchFilterPipe.ctorParameters = () => [
    { type: IgxGridExcelStyleFilteringComponent }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    IgxExcelStyleSearchFilterPipe.prototype.esf;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhjZWwtc3R5bGUtc2VhcmNoLnBpcGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9pZ25pdGV1aS1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL2dyaWRzL2ZpbHRlcmluZy9leGNlbC1zdHlsZS9leGNlbC1zdHlsZS1zZWFyY2gucGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUFrQixtQ0FBbUMsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQzdHLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQzs7OztBQVFqRCxNQUFNLE9BQU8sNkJBQTZCOzs7O0lBRXRDLFlBQW9CLEdBQXdDO1FBQXhDLFFBQUcsR0FBSCxHQUFHLENBQXFDO0lBQUksQ0FBQzs7Ozs7O0lBRWpFLFNBQVMsQ0FBQyxLQUF1QixFQUFFLFVBQWtCO1FBQ2pELElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO1lBQ3pCLE9BQU8sRUFBRSxDQUFDO1NBQ2I7UUFFRCxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ2IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1lBQzlDLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsVUFBVSxHQUFHLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQzs7Y0FDaEMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQztZQUM1RCxDQUFDLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDO2dCQUM3QyxFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzs7OztjQUl6RCxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUVuRCxtREFBbUQ7UUFDbkQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRTdCLE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7OztZQS9CSixJQUFJLFNBQUM7Z0JBQ0YsSUFBSSxFQUFFLHdCQUF3QjthQUNqQzs7OztZQVJ3QixtQ0FBbUM7Ozs7Ozs7SUFXNUMsNENBQWdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRmlsdGVyTGlzdEl0ZW0sIElneEdyaWRFeGNlbFN0eWxlRmlsdGVyaW5nQ29tcG9uZW50IH0gZnJvbSAnLi9ncmlkLmV4Y2VsLXN0eWxlLWZpbHRlcmluZy5jb21wb25lbnQnO1xuaW1wb3J0IHsgY2xvbmVBcnJheSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvdXRpbHMnO1xuXG4vKipcbiAqIEBoaWRkZW5cbiAqL1xuQFBpcGUoe1xuICAgIG5hbWU6ICdleGNlbFN0eWxlU2VhcmNoRmlsdGVyJ1xufSlcbmV4cG9ydCBjbGFzcyBJZ3hFeGNlbFN0eWxlU2VhcmNoRmlsdGVyUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlc2Y6IElneEdyaWRFeGNlbFN0eWxlRmlsdGVyaW5nQ29tcG9uZW50KSB7IH1cblxuICAgIHRyYW5zZm9ybShpdGVtczogRmlsdGVyTGlzdEl0ZW1bXSwgc2VhcmNoVGV4dDogc3RyaW5nKTogYW55W10ge1xuICAgICAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VhcmNoVGV4dCkge1xuICAgICAgICAgICAgdGhpcy5lc2YuZXhjZWxTdHlsZVNlYXJjaC5maWx0ZXJlZERhdGEgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VhcmNoVGV4dCA9IHNlYXJjaFRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gaXRlbXMuZmlsdGVyKChpdCwgaSkgPT4gKGkgPT09IDAgJiYgaXQuaXNTcGVjaWFsKSB8fFxuICAgICAgICAgICAgKGl0LnZhbHVlICE9PSBudWxsICYmIGl0LnZhbHVlICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICBpdC52YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2hUZXh0KSA+IC0xKTtcblxuICAgICAgICAvLyBJZiAncmVzdWx0JyBjb250YWlucyB0aGUgJ1NlbGVjdCBBbGwnIGl0ZW0gYW5kIGF0IGxlYXN0IG9uZSBtb3JlLCB3ZSB1c2UgaXQgYXMgYSAnZmluYWxSZXN1bHQnLFxuICAgICAgICAvLyBvdGhlcndpc2Ugd2UgdXNlIGFuIGVtcHR5IGFycmF5IGFzIGEgJ2ZpbmFsUmVzdWx0JyBvZiB0aGUgZmlsdGVyaW5nLlxuICAgICAgICBjb25zdCBmaW5hbFJlc3VsdCA9IHJlc3VsdC5sZW5ndGggPiAxID8gcmVzdWx0IDogW107XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBmaWx0ZXJlZERhdGEgb2YgdGhlIHNlYXJjaCBjb21wb25lbnQuXG4gICAgICAgIHRoaXMuZXNmLmV4Y2VsU3R5bGVTZWFyY2guZmlsdGVyZWREYXRhID0gY2xvbmVBcnJheShmaW5hbFJlc3VsdCk7XG4gICAgICAgIHRoaXMuZXNmLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICAgICAgcmV0dXJuIGZpbmFsUmVzdWx0O1xuICAgIH1cbn1cbiJdfQ==